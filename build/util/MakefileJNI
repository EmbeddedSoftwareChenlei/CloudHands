##########################################################
#Copyright(C) 2012 WAF PROJECT TEAM
#Author(A) shajianfeng
##########################################################

CFLAGS  = ${BUILD_CFLAGS} -ggdb3 -O0 -rdynamic -D_GNU_SOURCE -pthread
CFLAGS += `/usr/local/apr/bin/apr-1-config --includes`
CFLAGS += `/usr/local/apr/bin/apu-1-config --includes`
CFLAGS += -fPIC -shared -I${JAVA_HOME}/include -I${JAVA_HOME}/include/linux
LDLIBS += -L/usr/local/apr/lib -lapr-1
LDLIBS +=  -L/usr/local/apr/lib -laprutil-1

jni_SOURCES = ch_file.c \
		  ch_errno.c  \
		  ch_string.c \
		  ch_log.c    \
		  ch_mmap.c \
		  ch_mmap_file_format.c \
		  ch_mmap_packets_format.c \
		  ch_session_packet_reader_jni.c\
		  ch_packet_reader_jni.c
		  
jni_package = libCloudHandsJNI.so

.PHONY: all clean install

all:
	gcc ${CFLAGS} ${jni_SOURCES} -o ${jni_package} ${LDLIBS}

clean:
	rm -rf ${jni_package}
